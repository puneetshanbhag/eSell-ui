<div class="container">
  <mat-horizontal-stepper labelPosition="bottom" linear="false" #stepper>
    <mat-step [stepControl]="firstFormGroup" state="customer">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>1.Customer Details</ng-template>
        <div class="row">
          <div class="col-sm-6 example-container">
            <mat-card class="mt-1">
              <mat-card-header>
                <mat-card-title>
                  <h4>Customer Information</h4>
                </mat-card-title>
                <mat-card-subtitle>Enter customer information</mat-card-subtitle>
              </mat-card-header>
              <mat-divider></mat-divider>
              <mat-divider></mat-divider>
              <mat-card-content>
                <mat-grid-list cols="1">
                  <mat-grid-tile>
                    <div class="grid-l-tang">
                      <mat-form-field class="example-full-width">
                        <input matInput #companyName placeholder="Company Name" formControlName="firstCtrl" required>
                      </mat-form-field>
                      <p>
                        <mat-form-field class="example-full-width">
                          <textarea matInput #address1 placeholder="Address 1" formControlName="firstCtrl"
                            required></textarea>
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <textarea matInput #address2 placeholder="Address 2 (optional)"></textarea>
                        </mat-form-field>
                      </p>

                      <table class="example-full-width" cellspacing="0">
                        <tr>
                          <td>
                            <mat-form-field class="example-full-width">
                              <input matInput #city placeholder="City" formControlName="firstCtrl" required>
                            </mat-form-field>
                          </td>
                          <td>
                            <mat-form-field class="example-full-width">
                              <input matInput #state placeholder="State" formControlName="firstCtrl" required>
                            </mat-form-field>
                          </td>
                        </tr>
                      </table>
                      <p>
                        <mat-form-field class="example-full-width">
                          <input matInput #postalCode maxlength="5" placeholder="Postal Code"
                            formControlName="firstCtrl" required>
                          <mat-hint align="end">{{postalCode.value.length}} / 5</mat-hint>
                        </mat-form-field>
                      </p>
                    </div>
                  </mat-grid-tile>
                </mat-grid-list>
              </mat-card-content>
            </mat-card>
          </div>
          <div class="col-sm-6 example-container">
            <mat-card class="mt-1">
              <mat-card-header>
                <mat-card-title>
                  <h4>{{companyName.value}} <small>Billing Details</small></h4>
                </mat-card-title>
                <mat-card-subtitle caption>Enter customer billing information</mat-card-subtitle>
                <!-- <mat-checkbox class="example-margin" color="primary" formControlName="firstCtrl"
                  [(ngModel)]="isCopyCompanyAddress">Billing address
                  same as company?
                </mat-checkbox> -->
              </mat-card-header>
              <mat-divider></mat-divider>
              <mat-divider></mat-divider>
              <mat-card-content>
                <mat-grid-list cols="1">
                  <mat-grid-tile>
                    <div class="grid-l-tang">
                      <table class="example-full-width" cellspacing="0">
                        <tr>
                          <td>
                            <mat-form-field class="example-full-width">
                              <input matInput #billingFirstName placeholder="Billing Contact First Name"
                                formControlName="firstCtrl" required>
                            </mat-form-field>
                          </td>
                          <td>
                            <mat-form-field class="example-full-width">
                              <input matInput #billingLastName placeholder="Billing Contact Last Name"
                                formControlName="firstCtrl" required>
                            </mat-form-field>
                          </td>
                        </tr>
                      </table>

                      <p>
                        <mat-form-field class="example-full-width">
                          <input matInput #billingEmail formControlName="firstCtrl" placeholder="Billing Contact Email"
                            required>
                        </mat-form-field>
                      </p>

                      <p>
                        <mat-form-field class="example-full-width">
                          <textarea matInput #billingAddress1 placeholder="Billing Address 1"
                            formControlName="firstCtrl" required></textarea>
                        </mat-form-field>
                        <mat-form-field class="example-full-width">
                          <textarea matInput #billingAddress2 placeholder="Billing Address 2 (optional)"></textarea>
                        </mat-form-field>
                      </p>
                      <table class="example-full-width" cellspacing="0">
                        <tr>
                          <td>
                            <mat-form-field class="example-full-width">
                              <input matInput #billingCity placeholder="City" formControlName="firstCtrl" required>
                            </mat-form-field>
                          </td>
                          <td>
                            <mat-form-field class="example-full-width">
                              <input matInput #billingState placeholder="State" formControlName="firstCtrl" required>
                            </mat-form-field>
                          </td>
                        </tr>
                      </table>
                      <p>
                        <mat-form-field class="example-full-width">
                          <input matInput #billingPostalCode maxlength="5" placeholder="Postal Code"
                            formControlName="firstCtrl" required>
                          <mat-hint align="end">{{billingPostalCode.value.length}} / 5</mat-hint>
                        </mat-form-field>
                      </p>
                    </div>
                  </mat-grid-tile>
                </mat-grid-list>
              </mat-card-content>
            </mat-card>
          </div>
        </div>



        <div class="float-md-right mt-3">
          <button class="btn btn-outline-success mr-2 my-2 my-sm-0" mat-button matStepperNext>Next
            <mat-icon>navigate_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>


    <mat-step [stepControl]="secondFormGroup" state="product">
      <form [formGroup]="secondFormGroup">
        <ng-template matStepLabel>2.Product & Services</ng-template>

        <div class="row example-full-width">
          <div class="col">
            <mat-form-field style="width:225px !important">
              <mat-label>Select Contract Term</mat-label>
              <mat-select [(value)]="selected" formControlName="secondCtrl">
                <mat-option value="1">1 Year</mat-option>
                <mat-option value="2">2 Year</mat-option>
                <mat-option value="3">3 Year</mat-option>
              </mat-select>
              <mat-hint class="example-full-width">Customer contract term : {{selected}} Year is selected</mat-hint>
            </mat-form-field>
          </div>
        </div>
        <br>


        <mat-accordion class="example-headers-align">
          <mat-expansion-panel [expanded]="isTelecom" (opened)="isTelecom">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <section class="example-section">
                  <mat-checkbox class="example-margin" color="primary" labelPosition="after" #isTelecom
                    [(ngModel)]="isTelecomChecked" formControlName="secondCtrl">
                    <span>Telecom</span>
                  </mat-checkbox>
                </section>


              </mat-panel-title>
              <mat-panel-description>
                Telecom Product & Service
                <mat-icon>phone</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-divider></mat-divider>
            <br>

            <div class="row">
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput #annualSpend placeholder="Spend (Annual)" type="number" class="example-right-align">
                  <span matPrefix>$&nbsp;</span>
                  <span matSuffix>.00</span>
                  <mat-hint>Enter customer's estimated Annual Spend</mat-hint>
                </mat-form-field>
              </div>
              <div class="col-sm-1 text-center">
                <div class="row text-center">
                  <span>
                    <h5>Price</h5>
                  </span>
                </div>
                <div class="row text-center">
                  <span>
                    <b>1.5%</b>
                  </span>
                </div>
              </div>

              <div class="col-sm-2 text-center">
                <div class="row text-center">
                  <span>
                    <h5> Total Price</h5>
                  </span>
                </div>
                <div class="row text-center">
                  <span>
                    <b>{{(annualSpend.value * 1.5/100)| currency}}</b>
                  </span>
                </div>
              </div>

              <div class="col-sm-2 text-center">
                <div class="row">
                  <span>
                    <h5>Your Discount</h5>
                  </span>
                </div>
                <div class="row text-center">
                  <span style="color: red;">
                    <b>-10%</b>
                  </span>
                </div>
              </div>


              <div class="col-sm-4 text-center">
                <div class="row">
                  <span>
                    <h5>Your Final Price</h5>
                  </span>
                </div>
                <div class="row text-center">
                  <span style="color: green;">
                    <b>{{(annualSpend.value * 1.5/100) - (annualSpend.value * 1.5/100) * 10 /100 | currency}}</b>
                  </span>
                </div>
              </div>

            </div>


            <!-- <mat-list>
                <h3 mat-subheader>Folders</h3>
                
              </mat-list> -->

            <mat-list dense>
              <h3 matSubheader>Includes</h3>
              <mat-list-item>
                <mat-icon matListIcon>done_outline</mat-icon>
                Order Management
              </mat-list-item>
              <mat-list-item>
                <mat-icon matListIcon>done_outline</mat-icon>
                Invoice Management
              </mat-list-item>
              <mat-list-item>
                <mat-icon matListIcon>done_outline</mat-icon>
                Expense Management
              </mat-list-item>
              <mat-list-item>
                <mat-icon matListIcon>done_outline</mat-icon>
                Inventory Management
              </mat-list-item>
              <mat-list-item>
                <mat-icon matListIcon>done_outline</mat-icon>
                Bill Pay
              </mat-list-item>
            </mat-list>
            <mat-divider></mat-divider>

            <section class="example-section">
              <mat-checkbox class="example-margin" color="primary" [(ngModel)]="includeOrderProcessing"
                formControlName="secondCtrl">
                Order Processing</mat-checkbox>
            </section>

            <div *ngIf="includeOrderProcessing" class="row mt-3">
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput #annualOrders placeholder="Order Count (Annual)" type="number"
                    class="example-right-align">
                  <mat-hint>Enter customer's estimated Annual Order Processing</mat-hint>
                </mat-form-field>
              </div>
              <div class="col-sm-1 text-center">
                <div class="row text-center">
                  <span>
                    <h5>Price</h5>
                  </span>
                </div>
                <div class="row text-center">
                  <span>
                    <b>$135</b>
                  </span>
                </div>
              </div>

              <div class="col-sm-2 text-center">
                <div class="row text-center">
                  <span>
                    <h5> Total Price</h5>
                  </span>
                </div>
                <div class="row text-center">
                  <span>
                    <b>{{(annualOrders.value * 135)| currency}}</b>
                  </span>
                </div>
              </div>

              <div class="col-sm-2 text-center">
                <div class="row">
                  <span>
                    <h5>Your Discount</h5>
                  </span>
                </div>
                <div class="row text-center">
                  <span style="color: red;">
                    <b>-10%</b>
                  </span>
                </div>
              </div>


              <div class="col-sm-4 text-center">
                <div class="row">
                  <span>
                    <h5>Your Final Price</h5>
                  </span>
                </div>
                <div class="row text-center">
                  <span style="color: green;">
                    <b>{{(annualOrders.value * 135) - ((annualOrders.value * 135) * 10 /100) | currency}}</b>
                  </span>
                </div>
              </div>
            </div>

            <mat-action-row>
              <button mat-button color="primary" (click)="nextStep()">Next</button>
            </mat-action-row>
          </mat-expansion-panel>

          <mat-expansion-panel [expanded]="!isMobileChecked" (opened)="setStep(1)">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <section class="example-section">
                  <mat-checkbox class="example-margin" color="primary" labelPosition="after" #isMobile
                    [(ngModel)]="isMobileChecked" formControlName="secondCtrl">
                    <span>Mobile</span>
                  </mat-checkbox>
                </section>
              </mat-panel-title>
              <mat-panel-description>
                Mobile Product & Service
                <mat-icon>settings_cell</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>

            <!-- <mat-form-field>
              <input matInput placeholder="Country">
            </mat-form-field> -->

            <mat-action-row>
              <button mat-button color="warn" (click)="prevStep()">Previous</button>
              <button mat-button color="primary" (click)="nextStep()">Next</button>
            </mat-action-row>
          </mat-expansion-panel>

          <mat-expansion-panel [expanded]="!isCloudChecked" (opened)="setStep(2)">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <section class="example-section">
                  <mat-checkbox class="example-margin" color="primary" labelPosition="after" #isCloud
                    [(ngModel)]="isCloudChecked" formControlName="secondCtrl">
                    <span>Cloud</span>
                  </mat-checkbox>
                </section>

              </mat-panel-title>
              <mat-panel-description>
                Cloud Product & Service
                <mat-icon>cloud_queue</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-action-row>
              <button mat-button color="warn" (click)="prevStep()">Previous</button>
              <button mat-button color="primary" (click)="nextStep()">End</button>
            </mat-action-row>
          </mat-expansion-panel>

        </mat-accordion>



        <div class="float-md-right mt-3">
          <button class="btn btn-outline-success mr-2 my-2 my-sm-0" mat-button matStepperPrevious>
            <mat-icon>navigate_before</mat-icon>Back
          </button>
          <button class="btn btn-outline-success mr-2 my-2 my-sm-0" mat-button matStepperNext>Next
            <mat-icon>navigate_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step state="download">
      <ng-template matStepLabel>3.Review & Download</ng-template>
      <p>You are now done.</p>
      <div class="float-md-left mt-3">
        <button class="btn btn-outline-success mr-2 my-2 my-sm-0" mat-button matStepperPrevious>
          <mat-icon>navigate_before</mat-icon>Back
        </button>
        <button class="btn btn-outline-success mr-2 my-2 my-sm-0" mat-button (click)="stepper.reset()">Reset
          <mat-icon>settings_backup_restore</mat-icon>
        </button>
      </div>
      <div class="float-md-right mt-3">
        <button class="btn btn-outline-success mr-2 my-2 my-sm-0" mat-button (click)="generatePdf('open')">Preview
          PDF
          <mat-icon>visibility</mat-icon>
        </button>
        <button class="btn btn-outline-success mr-2 my-2 my-sm-0" mat-button (click)="generatePdf('download')">Download
          PDF <mat-icon>save_alt</mat-icon>
        </button>
      </div>
    </mat-step>
    <ng-template matStepperIcon="customer">
      <mat-icon>domain</mat-icon>
    </ng-template>
    <ng-template matStepperIcon="product">
      <mat-icon>queue</mat-icon>
    </ng-template>
    <ng-template matStepperIcon="download">
      <mat-icon>save_alt</mat-icon>
    </ng-template>
  </mat-horizontal-stepper>
</div>